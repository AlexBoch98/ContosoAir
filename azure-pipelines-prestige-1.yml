# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: NodeTool@0
  inputs:
    versionSpec: '10.x'
  displayName: 'Install Node.js'

- script: |
    npm install
    npm run build
  displayName: 'npm install and build'



  - task: FortifyOnDemandStatic@5
    inputs:
      FortifyProjects: '$(build.artifactstagingdirectory)'
      BSIToken: 'eyJ0ZW5hbnRJZCI6MTIzNiwidGVuYW50Q29kZSI6IlByZXN0aWdlIiwicmVsZWFzZUlkIjoyMjgyNjEsInBheWxvYWRUeXBlIjoiQU5BTFlTSVNfUEFZTE9BRCIsImFzc2Vzc21lbnRUeXBlSWQiOjI3NCwidGVjaG5vbG9neVR5cGUiOiJKUy9UUy9IVE1MIiwidGVjaG5vbG9neVR5cGVJZCI6MTYsInRlY2hub2xvZ3lWZXJzaW9uIjpudWxsLCJ0ZWNobm9sb2d5VmVyc2lvbklkIjpudWxsLCJhdWRpdFByZWZlcmVuY2UiOiJBdXRvbWF0ZWQiLCJhdWRpdFByZWZlcmVuY2VJZCI6MiwiaW5jbHVkZVRoaXJkUGFydHkiOmZhbHNlLCJpbmNsdWRlT3BlblNvdXJjZUFuYWx5c2lzIjp0cnVlLCJwb3J0YWxVcmkiOiJodHRwczovL2Ftcy5mb3J0aWZ5LmNvbSIsImFwaVVyaSI6Imh0dHBzOi8vYXBpLmFtcy5mb3J0aWZ5LmNvbSIsInNjYW5QcmVmZXJlbmNlIjoiU3RhbmRhcmQiLCJzY2FuUHJlZmVyZW5jZUlkIjoxfQ=='
      APIAuthenticationType: '2'
      Username: 'eric_prestige'
      PersonalAccessTokenSecret: 'Z2hkRix3Z1BVd0xkaDM2Z2VwUEExfVNvNGhxRjAi0'
      TenantID: 'TT1'
      EntitlementPreference: '1'
      PurchaseEntitlements: false
      InProgressScanActionType: '0'
      RemediationScanPreference: '0'
      PolicyFailAction: '0'
